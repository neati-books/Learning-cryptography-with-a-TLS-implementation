<html>
	<head>
		<meta charset=utf-8>
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<link rel='stylesheet' href='tutorial.css'>
		<script src="tutorial.js"></script>
	</head>

	<body>
		<h1 class="w3-center w3-panel w3-green">Tutorial 2. Server side Programming, handling get request</h1>
		<div class="w3-row w3-border">
			<div class="w3-hide-small w3-col m2 l2">
			</div>
			<div class="w3-rest w3-container">
		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>Result</h4>
			<div class='w3-code notranslate'>
				<a href="result_view.html?name='park'&day='mon'">go to doc1 with get method</a>
			</div>
			<p class=eng>
Up until now, our web site was just composed of static web pages.
Now, we need to process requests like get or post method.
So, we need to change our server side programming a little bit.
			</p>
			<p class=kor>
			여태까지는 우리의 웹사이트는 정적인 웹페이지만을 포함하였다.
			이제 get 혹은 post로 요청된 페이지를 한 번 처리해 보자.
			서버측 프로그래밍이 필요하다.
			</p>
		</div>
		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>index.html</h4>
			<div class='w3-code notranslate'>
				<pre>&lt;html>
	&lt;body>
	&lt;a href="result_view.html?name='park'&day='mon'">get method test&lt;/a>
	&lt;/body>
&lt;/html></pre>
			</div>
		</div>

		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>C++ side Programming</h4>
			<div class='w3-code notranslate'>
				<pre>class My_site : public WebSite
{
protected:
	void process() {
		if(requested_document_ == "result_view.html") {
			content_ = "&lt;html>&lt;h2>";
			for(auto [a, b] : nameNvalue_) content_ += a + ':' + b + "&lt;br>";
			content_ += "&lt;/h2>&lt;/html>";
		}
	}
};

int main(int ac, char** av)
{
	My_site my_site;
	my_site.init("www");//directory contains html files
	Server sv{2000};//port number
	sv.start(my_site);//go infinite loop
} </pre>
			</div>
		<p class=eng>We need our own version of WebSite class. 
		We should derive this from WebSite class.
		There are some variables and some rules to make server side programming easy.
		</p>
		<p class=kor>
		우리는 WebSite 클래스로 부터 상속받아 우리의 웹사이트 클래스를 정의해야 한다.
		서버측 프로그래밍을 위하 몇 개의 변수와 규칙이 있다.
		</p>
		<p class=eng>
		WebSite class has three important variables.
		string requested_document_, string content_, map&lt;string, string> nameNvalue_.
		eZ Framework will make these variables ready, when a webpage is requested.
	When a webpage is requested by webbrowser, requested_document_ will have the
	document name.
	In upper case it is "tutorial1.html".
	And the content_ will be same as tutorial1.html contents.
	And the parameters will fill the nameNvalue_ variable.
	In upper case it is {"name" : "park", "day" : "mon"}.
		</p>
		<p class=kor>
		WebSite 클래스는 세 개의 중요한 변수가 있다.
		string requested_document_, string content_, map&lt;string, string> nameNvalue_
		eZ 프레임워크는 이 세개의 변수들을 준비시켜 놓을 것이다.
		웹 페이지가 요청되면, requested_document_ 는 요청된 웹페이지를 가지고 있을 것이고, 
		위의 경우라면 tutorial1.html이 될 것이다.
		그리고, content_ 는 tutorial1.html의 내용으로 채워질 것이다.
		파라미터들은 nameNvalue_ 변수에 저장되어 있을 것이다.
		위의 경우라면 {"name" : "park", "day" : "mon"} 이다.
		</p>
		<p class=eng>
	And just before the server sends content_ to the client, 
	process method will be called.<br>

	So, what we are to do is to implement the process method.
	That is all you need to know about this library for server side programming.
	So we will check if parameters are set, and if there is parameters we will print
	theses on the webpage. That is to change the content_ variable.
		</p>
		<p class=kor>
		그리고, 서버가 content_를 브라우저에게 보내기 직전에 process 함수가 호출될 것이다.<br>
		그러므로, 우리가 해야 할 것은 process 함수를 구현하는 것이다.
		이것이 eZ 프레임워크에의 서버측 프로그래밍에 대해 알아야 할 모든 것이다.
		우리는 파라미터들이 셋팅되었는지 보고, 이 파라미터들을 웹페이지에 프린트할 것이다.
		즉, content_ 변수를 변화시킬 것이다.
		</p>
		</div>
			</div></div>
 <div class="w3-bar w3-border w3-round w3-center">
  <a href="tutorial1.html" class="w3-button">&#10094; Previous</a>
	<a href="index.html" class="w3-button w3-center">Home</a>
  <a href="tutorial3.html" class="w3-button">Next &#10095;</a>
</div> 
	</body>
</html>
