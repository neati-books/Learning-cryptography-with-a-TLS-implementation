<html>
	<head>
		<meta charset=utf-8>
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<link rel='stylesheet' href='tutorial.css'>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<script src="tutorial.js"></script>
	</head>

	<body>
		<h1 class="w3-center w3-panel w3-green">Tutorial 6. Using C++ variables for multi page web service</h1>
		<div class="w3-row w3-border">
			<div class="w3-hide-small w3-col m2 l2">
			</div>
			<div class="w3-rest w3-container">

		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>Page 1, form1.html</h4>
			<div class='w3-code notranslate'>
				id<input type="text" name="id" value="myId" ><br>
				name<input type='text' name='name' value="myName"> <button>ok</button>
			</div>
			<p class=eng>
			Occasionally, websites get inputs across many pages.
			Let's consider a form like above.
			</p>
			<p class=kor>
			때때로, 웹사이트는 여러 페이지에 걸쳐 입력을 받는다.
			위와 같은 입력 폼을 생각해보자.
			</p>
		</div>

		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>Page 2, form2.html</h4>
			<div class='w3-code notranslate'>
			address<input type="text" name="address" value="myAddress"><br>
			email<input type='text' name='email' value="myEmail"><button>ok</button>
			</div>
			And then another form. In another page.
		</div>
		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>Page 3, result.html</h4>
			<div class='w3-code notranslate'>
			Your address is myAddress<br>
			Your name is myName<br>
			Your email is myEmail<br>
			Your id is myId<br>
			</div>
			And we show the result at our last page.
		</div>
		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>Page 1, form1.html</h4>
			 <div class='w3-code notranslate'>
		<div class = 'w3-panel w3-card w3-light-grey'>
<pre>&lt;form action="form2.html" method="post">
			id&lt;input type="text" name="address" >&lt;br>
			name&lt;input type='text' name='email'>&lt;br>
			&lt;input type="submit"  value="ok">
		&lt;/form> </pre>
		</div></div>
		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>Page 2, form2.html</h4>
			<div class='w3-code notranslate'>
				<pre>&lt;form action="result.html" method="post">
	address&lt;input type="text" name="address" >&lt;br>
	email&lt;input type='text' name='email'>&lt;br>
	&lt;input type="submit"  value="ok">
&lt;/form></pre>
			</div></div>
		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>Page 3, result.html</h4>
			<div class='w3-code notranslate'>
				<pre>Your address is @ADDRESS<&lt;br>
Your name is @NAME<&lt;br>
Your email is @EMAIL<&lt;br>
Your id is @ID<&lt;br></pre>
			</div>
		</div>

		<div class = 'w3-panel w3-card w3-light-grey'>
			<h4>C++ side Programming</h4>
			<div class='w3-code notranslate'>
				<pre>class MySite : public WebSite {
public:
	map&lt;string, string> m;
	void process() {
		if(requested_document_ == "form2.html" || requested_document_ == "result.html")
			for(const auto& [name, value] : nameNvalue_) m[name] = value;
		if(requested_document_ == "result.html") {
			swap("@ADDRESS", m["address"]);
			swap("@NAME", m["name"]);
			swap("@ID", m["id"]);
			swap("@EMAIL", m["email"]);
		}
	}
} </pre>
			</div>
			<p class=eng>
			We do not need to query database or use cookei to know the parameters. 
			We can just use variables, just like normal programming.
			This is enabled by middle server maintaining connections for us.
			This is where eZ Framework shines.
			There is some helper functions.
			swap(first, second) function will swap the first string in the content_ variable with second string.
			append(first, second) function will append after the first string in the content_ variable with the second string.
			I recommend using @CAPITAL_LETTERS for swapping template string.
			Because @ cannot be generated by base64 encoding.
			</p>
			<p class=kor>
			우리는 파라미터 알기 위해 쿼리나 쿠키를 사용할 필요가 없다.
			그저 일반적인 프로그래밍에서 하듯 변수를 사용하면 된다.
			이것은 미들 서버가 우리를 대신하여 웹서버와 지속적인 접속을 유지하기 때문에 가능하다.
			이 부분이 eZ 프레임워크가 뛰어난 부분이다.
			몇 개의 유용한 함수가 있다.
			swap(a, b) 함수는 content_ 변수에서 a를 찾아서 b로 바꾼다.
			append(a, b) 함수는 content_에서 a를 찾아서 그 뒤에 b를 덧붙인다.
			나는 템플릿에서 앵커로 @이후에 대문자영문자를 사용하는 것을 추천한다.
			@는 base64 인코딩에서 나올 수가 없는 문자이고, HTML에서도 거의 쓰이지 않는다.
			</p>
		</div>
		</div></div>

 <div class="w3-bar w3-border w3-round w3-center">
  <a href="tutorial5.html" class="w3-button">&#10094; Previous</a>
	<a href="index.html" class="w3-button w3-center">Home</a>
  <a href="tutorial7.html" class="w3-button">Next &#10095;</a>
</div> 
	</body>
</html>
